# Vulnerability Weighting Map Tool

This repository hosts a free and open-source mapping tool that allows users to map socioeconomic vulnerability indicators in their community. Social vulnerability is a salient but complex topic, and there are many studies that have tried to assess and evaluate different indicator metrics for their appropriateness. 

This tool is built to allow users to experiment with different indicators and their weighting mechanism to see how changing the weight of one metric affects the outcome on a map. For example, how well would a census tract "perform" if computer access became a more important consideration to weight? Would the tract be considered more or less vulnerable with increased focus on that metric?

![Video demonstration](https://github.com/BPSTechServices/vulnerability_weighting_map/blob/main/images/weighting_demo_low-res.gif?raw=true)

The intended purpose of this tool is to:

1. Demonstrate how many social vulnerability indicators co-vary with one another. In other words, the map results for some communities are not much different from each other when the weighting mechanism is modified.
2. Quickly assess the geographic distribution of an indexed vulnerability indicator across a few metrics. For example, if a community organization wanted to prioritize areas that lacked computer access, the tool allows you to focus on computer access as a key metric and add in supplemental vulnerability metrics.
3. Serve as an educational tool to understanding the geographic distribution of intersectional equity questions. How does race intersect with income? Or disability intersect with age?
4. Allow analysts to break down the components of an indexed or composite indicator into its constituent parts to see how it impacts the index.

## Required and recommended software
To run the app in your community, you will need a few pieces of software and libraries:

* [R](https://cran.r-project.org/)
* [R Studio](https://www.rstudio.com/products/rstudio/)
* Kyle Walker's [tidycensus](https://github.com/walkerke/tidycensus) package
* [Census Bureau API key](https://api.census.gov/data/key_signup.html) 
* [Shinyapps.io](https://www.shinyapps.io/) account (free with up to 5 web apps)

## Set up for your own community
To set up this application in your home region, follow the steps below:

1. In `process_data.R`, change line 14 to the name of your region and run that line (CTRL+Enter or CMD+Enter in Mac). 
2. You'll notice that a table containing a CBSA code will pop up in the output. Enter the appropriate CBSA code into line 18.
3. Run lines 18 through 116 (highlight those lines, then CTRL+Enter).
4. On line 121, adjust the negative distance buffer to select the "primary" census tracts in your city of interest (or read in a list of census tracts you want to count as the primary place, i.e., City of Portland).
5. To test if the negative distance buffer seems appropriate, first ensure `mapview` is installed, then run lines 120 through 126, then uncomment lines 132 to 133 and run the code to see a map of the tracts.
6. Finally, save the output to a RDS file by running line 129.

## Shiny app demo
Portland Bureau of Planning and Sustainability has a [mapping tool](https://portlandbps.shinyapps.io/adap_tool/) for the Anti-Displacement Action Plan which includes a vulnerability weighting tool and other features.

As of May 2021, temporary shiny apps are available for [Austin](https://plnnr.shinyapps.io/atx_vulnerability/) and [Atlanta](https://portlandbps.shinyapps.io/TEMP_atl_vulnerability_weighting_map/).

## Contact
If you need assistance setting this up in your community, contact [Nick Kobel](mailto:nick.kobel@portlandoregon.gov) at the Portland Bureau of Planning and Sustainability.